<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="../style.css">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&family=Playfair+Display&display=swap"
          rel="stylesheet">
    <title>Изображения для чайников – HolyJS 2019 Nov | yepstepz.io </title>
</head>
<body>
<div class="wrapper">
    <h1 class="headline">Изображения для чайников</h1>
    <p>
        Пдф презентации можно скачать здесь:
        <a class="link" href="/documents/holyjs2019v2.pdf" download>Скачать</a>
    </p>
    <iframe width="560" height="315" src="https://www.youtube.com/embed/lmglqZEVbnU" frameborder="0"
            allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    <h2 class="headline--second">Материалы из презентации</h2>
    <h3 class="headline--3">WebP и все-все-все</h3>
    <p>
        Заменяем жирные картинки современными форматами – WebP, например, получил более широкую поддержку чем соседи
        JPEG 2000 и JPEG XR. Используем тег
    <pre>
&lt;picture id="picture">
  &lt;source srcset="image.webp" type="image/webp">
  &lt;source srcset=“image.jpg" type="image/jpeg">
  &lt;img src=“image.jpg" alt="Alt Text!">
&lt;/picture>
         </pre>
    для полного охвата всех браузеров.
    </p>
    <h4 class="headline--4">Список ссылок</h4>
    <ul>
        <li><a class="link" href="https://codepen.io/j_holtslander/pen/xQgaWZ">Codepen с примером использования WebP</a>
        </li>
        <li><a class="link" href="https://developers.google.com/speed/webp">Про WebP</a></li>
        <li><a class="link" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/picture">Про тег &lt;picture
            /></a></li>
    </ul>
    <h3>srcset && sizes</h3>
    <p>
        srcset разные изображения для разных размеров экрана. Размер экрана указывается или по пикселям в ширину (через
        w), или по плотности пикселей (через x). По умолчанию 1x.
    </p>
    <p>
        sizes –  список размеров для изображения. По умолчанию 100w.
    </p>
    <p>
        Пример srcset && sizes:
    <pre>
&lt;img srcset="elva-fairy-320w.jpg 320w,
             elva-fairy-480w.jpg 480w,
             elva-fairy-800w.jpg 800w"
        sizes="(max-width: 320px) 280px,
            (max-width: 480px) 440px,
            800px"
        src="elva-fairy-800w.jpg" alt="Elva dressed as a fairy"
/>
</pre>
    Используем уже изученный тег &lt;picture/>:
    <pre>
&lt;picture>
  &lt;source media="(max-width: 799px)" srcset="elva-480w-close-portrait.jpg">
  &lt;source media="(min-width: 800px)" srcset="elva-800w.jpg">
  &lt;img src="elva-800w.jpg" alt="Chris standing up holding his daughter Elva">
&lt;/picture>
</pre>
    </p>
    <h4 class="headline--4">Список ссылок</h4>
    <ul>
        <li><a class="link" href="https://codepen.io/studioadam/pen/pNVNNj?editors=1100">Codepen с примером srcset</a>
        </li>
        <li><a class="link" href="https://caniuse.com/#search=srcset">Can I Use srcset?</a></li>
        <li><a class="link" href="https://html.com/attributes/img-srcset/">Зачем нужен srcset?</a></li>
        <li><a class="link" href="https://builtvisible.com/responsive-images-for-busy-people-a-quick-primer/">srcset c
            примером</a></li>
        <li><a class="link" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/picture">пример picture с
            media</a></li>
        <li><a class="link" href="https://caniuse.com/#search=sizes">Can I Use sizes?</a></li>
        <li><a class="link" href="https://ericportis.com/posts/2014/srcset-sizes/">Зачем нужен аттрибут sizes</a></li>
        <li><a class="link"
               href="https://medium.com/@MRWwebDesign/responsive-images-the-sizes-attribute-and-unexpected-image-sizes-882a2eadb6db">Проблемы
            с sizes</a></li>
        <li><a class="link" href="https://codepen.io/Konrud/pen/kkmXar?editors=1010">Codepen пример с sizes</a></li>
        <li><a class="link" href="https://css-tricks.com/responsive-images-css/">sizes && srcser vs media queries</a>
        </li>
    </ul>
    <h3 class="headline--3">Lazy &lt;IMG/> – onload</h3>
    <p>Ленивая подгрузка  изображений с помощью ивента onload.</p>
    <h4 class="headline--4">Список ссылок</h4>
    <ul>
        <li><a class="link" href="https://codepen.io/yepstepz/pen/oNNEXgK">Codepen с примером</a></li>
        <li><a class="link" href="https://jmperezperez.com/medium-image-progressive-loading-placeholder/">Размытие
            картинок в Medium</a></li>
        <li><a class="link" href="https://www.sitepoint.com/how-to-build-your-own-progressive-image-loader/">Как сделать
            Lazy Load с наворотами</a></li>
    </ul>
    <h3 class="headline--3">Lazy &lt;IMG/> – Intersection Observer Api</h3> Асинхронный детектор попадения элемента в
    поле зрения пользователя. Убийца Element.getBoundingClientRect() и прочих ивентных нагромождений. Требуется
    полифилл/можно перенести легаси код в условие if/else.
    <h4 class="headline--4">Полезные ссылки</h4>
    <ul>
        <li><a class="link" href="https://codepen.io/yepstepz/pen/LYYQEMa">Codepen с примером работы</a></li>
        <li><a class="link" href="https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API">Intersection
            API</a></li>
        <li><a class="link" href="https://developers.google.com/web/updates/2019/02/intersectionobserver-v2">Intersection
            API v1 vs v2</a></li>
        <li><a class="link" href="https://github.com/w3c/IntersectionObserver/tree/master/polyfill">Полифилл W3C</a>
        </li>
    </ul>
    <h3 class="headline--3">Error Handling aka Обработка ошибок – onerror</h3>
    <p>
        Плюсы: нативно, можно логировать. Минусы:
    <ul>
        <li>тестировать придется и изображение, и логику в onerror;</li>
        <li>если мы передаем в onerror изображение через this.src и оно битое – консоль будет красная;</li>
        <li>в разных библиотеках/фреймворках по-разному обрабатывается</li>
    </ul>
    </p>
    <h4 class="headline--4">Полезные ссылки</h4>
    <ul>
        <li><a class="link" href="https://codepen.io/yepstepz/pen/ZEErYWe">Codepen с примером onerror</a></li>
        <li><a class="link" href="https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onerror">Что
            такое onerror</a></li>
        <li><a class="link" href="https://medium.com/@sub.metu/angular-fallback-for-broken-images-5cd05c470f08">Angular
            и img.onerror</a></li>
        <li><a class="link" href="https://medium.com/@webcore1/react-fallback-for-broken-images-strategy-a8dfa9c1be1e">React
            и img.onerror </a></li>
    </ul>
    <h3 class="headline--3">Error Handling aka Обработка ошибок – css</h3>
    <p>Изображения не имеют псевдоэлементов, потому что не имеют текста/потомков. Но... можно повестить псевдоэлементы
        на изображение с ошибкой!</p>
    <p>
        Плюсы: будет работать в любых библиотеках/фреймворках. Минусы: after и before элементы помогают только
        визуально. Но перекладывать логирование на отдельные элементы незачем!
    </p>
    <h4 class="headline--4">Список ссылок</h4>
    <ul>
        <li><a class="link" href="https://codepen.io/yepstepz/pen/OJJQPRL?editors=1000">Codepen с примером</a></li>
        <li><a class="link" href="https://bitsofco.de/styling-broken-images/">Стили для битых картинок</a></li>
    </ul>
    <h3 class="headline--3">Доступность / Accessibility</h3>
    <p>Доступность здесь на последних слайдах, но на деле она должна стоять на первом месте. Добавляем атрибуты alt к
        изображениям!</p>
    <h4 class="headline--4">Список ссылок</h4>
    <ul>
        <li><a class="link" href="https://www.w3.org/WAI/tutorials/images/">Здесь есть 99% кейсов для доступности
            изображений!</a></li>
    </ul>
    <h3 class="headline--3">Анимация с помощью изображений –  хочу как у Apple!</h3>
    <p>
        Рецепт: берём видео, разрезаем его на фреймы (поможет ffmpeg) и на событие onscroll рендерим наше изображение в
        canvas с помощью drawImage.
    </p>
    <h4 class="headline--4">Полезные ссылки</h4>
    <ul>
        <li><a class="link" href="https://www.apple.com/airpods-pro/">Тот самый лендинг Airpods</a></li>
        <li><a class="link" href="https://codepen.io/macsim_fr/pen/QjPrKY">пример с canvas на Vanilla.js</a></li>
        <li><a class="link" href="https://canvas.narative.now.sh/">ещё один пример с canvas</a></li>
        <li><a class="link" href="https://docs.google.com/document/pub?id=1GWTMLjqQsQS45FWwqNG9ztQTdGF48hQYpjQHR_d1WsI">исторические
            причины такого поступка (ренжерить видео картинками)</a></li>
    </ul>

    <p>Удачной оптимизации!</p>
</div>
</body>
</html>
